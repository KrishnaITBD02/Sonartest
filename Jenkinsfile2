node {
  stage('SonarQube Analysis') {
    def scannerHome = tool 'sonarqube';
    git branch: '*/master', url: 'https://github.com/your-repo.git' // replace with your repo URL
    sh 'git branch -a | grep remotes | grep -v HEAD | while read branch; do git branch --track "${branch#remotes/}" "$branch"; done' // track all remote branches
    sh 'git fetch --all' // fetch all remote branches
    sh 'git pull --all' // pull all remote branches
    sh 'git branch -a' // list all branches
    sh 'chmod +x ${scannerHome}/bin/sonar-scanner' // make sure sonar-scanner is executable
    sh "${scannerHome}/bin/sonar-scanner" // run SonarQube analysis
  }
}
